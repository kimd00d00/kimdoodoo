<!DOCTYPE html>
<!-- 
	JavaScript (동적 파일) : DOMScript
	DOM(HTML) -> 수정, 삭제, 추가, 읽기 등을 처리
	
	1. 데이터 저장 : 변수(자동 지정 변수. 데이터형을 지정하지 않음. let, const
	2. 데이터 처리 : 연산자, 제어문(for in/for of, ***map/forEach)
	3. 재사용 : 함수
		매개변수O, 리턴형O : function func_name(id, pwd){ return value; }
		매개변수O, 리턴형X : function func_name(id, pwd){}
		매개변수X, 리턴형O : function func_name(){return value;}
		매개변수O, 리턴형O : function func_name(){}
		= >함수를 호출할 때 태그에서 많이 호출함
			-> 자주 쓰는 태그
			click : <input type="button" click="func_name">
			hover : mouseover
			change
			keyup
			>>>이벤트 처리
		=> 태그 읽기
			getElementById(), getElementByName()
			querySelector("SELECTOR") ==${selector} 
		=>***서버 호환이 되어야 하는데 이 때 json
 -->
<html>
  <head>
    <meta charset="UTF-8">
    <title>Insert title here</title>
     <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.4.1/css/bootstrap.min.css">
     <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.6.0/jquery.min.js"></script>
     <script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.4.1/js/bootstrap.min.js"></script>
     <script type="text/javascript">
     let movie= [{
    	    "startYearDate": "2022.07.31",
    	    "endYearDate": "2022.07.31",
    	    "startDate": "2022년 07월 31일(일)",
    	    "endDate": "2022년 07월 31일(일)",
    	    "movieCd": "20209343",
    	    "showDt": "20220731",
    	    "thumbUrl": "/common/mast/movie/2022/07/thumb/thn_6ecaea887d6242b3a27c11ce960ed45b.jpg",
    	    "movieNm": "한산: 용의 출현",
    	    "movieNmEn": "Hansan: Rising Dragon",
    	    "synop": "나라의 운명을 바꿀 압도적 승리의 전투가 시작된다!\r\n\r\n1592년 4월, 조선은 임진왜란 발발 후 단 15일만에 왜군에 한양을 빼앗기며 절체절명의 위기에 놓인다.\r\n조선을 단숨에 점령한 왜군은 명나라로 향하는 야망을 꿈꾸며 대규모 병역을 부산포로 집결시킨다.\r\n\r\n한편, 이순신 장군은 연이은 전쟁의 패배와 선조마저 의주로 파천하며 수세에 몰린 상황에서도\r\n조선을 구하기 위해 전술을 고민하며 출전을 준비한다.\r\n하지만 앞선 전투에서 손상을 입은 거북선의 출정이 어려워지고,\r\n거북선의 도면마저 왜군의 첩보에 의해 도난 당하게 되는데… \r\n\r\n왜군은 연승에 힘입어 그 우세로 한산도 앞바다로 향하고,\r\n이순신 장군은 조선의 운명을 가를 전투를 위해 필사의 전략을 준비한다.\r\n\r\n1592년 여름, 음력 7월 8일 한산도 앞바다, \r\n압도적인 승리가 필요한 조선의 운명을 건 지상 최고의 해전이 펼쳐진다.",
    	    "prdtYear": "2021",
    	    "indieYn": null,
    	    "artmovieYn": null,
    	    "multmovieYn": null,
    	    "showTm": "129",
    	    "showTs": "30",
    	    "director": "김한민",
    	    "prNm": "(주)빅스톤픽쳐스",
    	    "dtNm": "롯데컬처웍스(주)롯데엔터테인먼트",
    	    "repNationCd": "한국",
    	    "movieType": "장편",
    	    "moviePrdtStat": "개봉",
    	    "genre": "액션,드라마",
    	    "watchGradeNm": "12세이상관람가",
    	    "openDt": "20220727",
    	    "salesAmt": 7043693621,
    	    "audiCnt": 655712,
    	    "scrCnt": 2132,
    	    "showCnt": 10095,
    	    "rank": 1,
    	    "rankInten": 0,
    	    "rankOldAndNew": "OLD",
    	    "rownum": 1
    	}];
     window.onload = function(){
    	 movies();
    	 }
     //이렇게도 만들 수 있음
     //let movies = function(){}; 
     function movies(){
    	 //movie.map(function(m){
    	//람다식 표기는 V 아래처럼
    	let index = 0;
    	let data="";
    	//이미지, 이름, 감독, 장르, 등급
    	movie.map((m)=>{
    		data+="<tr onmouseover=print("+index+")>"
    			+"<td class=text-center><img src=https://www.kobis.or.kr"+m.thumbUrl+" width=30 height=30></td>"
    			+"<td>"+m.movieNm+"</td>"
    			+"<td>"+m.director+"</td>"
    			+"<td>"+m.genre+"</td>"
    			+"<td>"+m.watchGradeNm+"</td></tr>";
    		index++;
    	})
    	
    	let tbody = document.querySelector("#tb");
    	tbody.innerHTML = data;
     }
    	 
     let print = (index)=>{
    	let m = movie[index];
    	let img = document.querySelector("#mimg");
    	img.src = "https://www.kobis.or.kr"+m.thumbUrl;
    	let title = document.querySelector("#title");
    	title.innerHTML = m.movieNm;
     }
     
</script>   
	<style type="text/css">
		.container{
		margin-top:50px;
		}
		.row{
		margin: 0px auto;
		width: 100%
		}
	</style> 
  </head>
  <body onload="movies()">
  	<div class="container">
  		<div class="col-sm-4">
  			<table class="table">
  				<tr>
  					<td rowspan="7" width=30%>
  						<img src="" id="mimg" style="width:100%">
  					</td>
  					<td colspan="2">
  						<h3 id="title"></h3>
  					</td>
  				</tr>
  				<tr>
  					<td width="20%">감독</td>
  					<td width="50%"></td>
  				</tr>
  				<tr>
  					<td width="20%">장르</td>
  					<td width="50%"></td>
  				</tr>
  				<tr>
  					<td width="20%">등급</td>
  					<td width="50%"></td>
  				</tr>
  				<tr>
  					<td width="20%">개봉일</td>
  					<td width="50%"></td>
  				</tr>
  				<tr>
  					<td width="20%">제작상태</td>
  					<td width="50%"></td>
  				</tr>
  				<tr>
  					<td width="20%">영화구분</td>
  					<td width="50%"></td>
  				</tr>
  				<tr>
  					<td width="20%"></td>
  					<td width="50%"></td>
  				</tr>
  				<tr>
  					<td width="20%"></td>
  					<td width="50%"></td>
  				</tr>
  			</table>
  		</div>
  		<div class="col-sm-8">
  			<table class="table">
  				<tr class="success">
  					<th class="text-center"></th>
  					<th class="text-center">영화명</th>
  					<th class="text-center">감독</th>
  					<th class="text-center">장르</th>
  					<th class="text-center">등급</th>
  				</tr>
  				<tbody id="tb">
  					
  				</tbody>
  			</table>
  		</div>
  	</div>
  </body>
</html>